(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{327:function(t,a,s){"use strict";s.r(a);var e=s(40),_=Object(e.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"性能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#性能","aria-hidden":"true"}},[t._v("#")]),t._v(" 性能")]),t._v(" "),s("h3",{attrs:{id:"_1-dns-预解析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-dns-预解析","aria-hidden":"true"}},[t._v("#")]),t._v(" 1 DNS 预解析")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("DNS")]),t._v(" 解析也是需要时间的，可以通过预解析的方式来预先获得域名所对应的 "),s("code",[t._v("IP")])])]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("dns-prefetch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("//shudong.wang"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("h3",{attrs:{id:"_2-缓存"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-缓存","aria-hidden":"true"}},[t._v("#")]),t._v(" 2 缓存")]),t._v(" "),s("ul",[s("li",[t._v("缓存对于前端性能优化来说是个很重要的点，良好的缓存策略可以降低资源的重复加载提高网页的整体加载速度")]),t._v(" "),s("li",[t._v("通常浏览器缓存策略分为两种：强缓存和协商缓存")])]),t._v(" "),s("p",[s("strong",[t._v("强缓存")])]),t._v(" "),s("blockquote",[s("p",[t._v("实现强缓存可以通过两种响应头实现："),s("code",[t._v("Expires")]),t._v("和 "),s("code",[t._v("Cache-Control")]),t._v(" 。强缓存表示在缓存期间不需要请求，"),s("code",[t._v("state code")]),t._v("为 "),s("code",[t._v("200")])])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Expires: Wed, 22 Oct 2018 08:41:00 GMT\n")])])]),s("blockquote",[s("p",[s("code",[t._v("Expires")]),t._v(" 是 "),s("code",[t._v("HTTP / 1.0")]),t._v(" 的产物，表示资源会在 "),s("code",[t._v("Wed, 22 Oct 2018 08:41:00 GMT")]),t._v(" 后过期，需要再次请求。并且 "),s("code",[t._v("Expires")]),t._v(" 受限于本地时间，如果修改了本地时间，可能会造成缓存失效")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Cache-control: max-age=30\n")])])]),s("blockquote",[s("p",[s("code",[t._v("Cache-Control")]),t._v(" 出现于 "),s("code",[t._v("HTTP / 1.1")]),t._v("，优先级高于 "),s("code",[t._v("Expires")]),t._v(" 。该属性表示资源会在 "),s("code",[t._v("30")]),t._v(" 秒后过期，需要再次请求")])]),t._v(" "),s("p",[s("strong",[t._v("协商缓存")])]),t._v(" "),s("ul",[s("li",[t._v("如果缓存过期了，我们就可以使用协商缓存来解决问题。协商缓存需要请求，如果缓存有效会返回 304")]),t._v(" "),s("li",[t._v("协商缓存需要客户端和服务端共同实现，和强缓存一样，也有两种实现方式")])]),t._v(" "),s("p",[s("code",[t._v("Last-Modified")]),t._v(" 和 "),s("code",[t._v("If-Modified-Since")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Last-Modified")]),t._v(" 表示本地文件最后修改日期，"),s("code",[t._v("If-Modified-Since")]),t._v(" 会将 "),s("code",[t._v("Last-Modified")]),t._v("的值发送给服务器，询问服务器在该日期后资源是否有更新，有更新的话就会将新的资源发送回来")]),t._v(" "),s("li",[t._v("但是如果在本地打开缓存文件，就会造成 "),s("code",[t._v("Last-Modified")]),t._v(" 被修改，所以在 "),s("code",[t._v("HTTP / 1.1")]),t._v(" 出现了 "),s("code",[t._v("ETag")])])]),t._v(" "),s("p",[s("code",[t._v("ETag")]),t._v(" 和 "),s("code",[t._v("If-None-Match")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("ETag")]),t._v(" 类似于文件指纹，"),s("code",[t._v("If-None-Match")]),t._v(" 会将当前 "),s("code",[t._v("ETag")]),t._v(" 发送给服务器，询问该资源 ETag 是否变动，有变动的话就将新的资源发送回来。并且 "),s("code",[t._v("ETag")]),t._v(" 优先级比 "),s("code",[t._v("Last-Modified")]),t._v(" 高")])]),t._v(" "),s("p",[s("strong",[t._v("选择合适的缓存策略")])]),t._v(" "),s("blockquote",[s("p",[t._v("对于大部分的场景都可以使用强缓存配合协商缓存解决，但是在一些特殊的地方可能需要选择特殊的缓存策略")])]),t._v(" "),s("ul",[s("li",[t._v("对于某些不需要缓存的资源，可以使用 "),s("code",[t._v("Cache-control: no-store")]),t._v(" ，表示该资源不需要缓存")]),t._v(" "),s("li",[t._v("对于频繁变动的资源，可以使用 "),s("code",[t._v("Cache-Control: no-cache")]),t._v(" 并配合 "),s("code",[t._v("ETag")]),t._v(" 使用，表示该资源已被缓存，但是每次都会发送请求询问资源是否更新。")]),t._v(" "),s("li",[t._v("对于代码文件来说，通常使用 "),s("code",[t._v("Cache-Control: max-age=31536000")]),t._v(" 并配合策略缓存使用，然后对文件进行指纹处理，一旦文件名变动就会立刻下载新的文件")])]),t._v(" "),s("h3",{attrs:{id:"_3-使用-http-2-0"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-使用-http-2-0","aria-hidden":"true"}},[t._v("#")]),t._v(" 3 使用 HTTP / 2.0")]),t._v(" "),s("ul",[s("li",[t._v("因为浏览器会有并发请求限制，在 "),s("code",[t._v("HTTP / 1.1")]),t._v(" 时代，每个请求都需要建立和断开，消耗了好几个 "),s("code",[t._v("RTT")]),t._v(" 时间，并且由于 "),s("code",[t._v("TCP")]),t._v(" 慢启动的原因，加载体积大的文件会需要更多的时间")]),t._v(" "),s("li",[t._v("在 "),s("code",[t._v("HTTP / 2.0")]),t._v(" 中引入了多路复用，能够让多个请求使用同一个 "),s("code",[t._v("TCP")]),t._v(" 链接，极大的加快了网页的加载速度。并且还支持 "),s("code",[t._v("Header")]),t._v(" 压缩，进一步的减少了请求的数据大小")])]),t._v(" "),s("h3",{attrs:{id:"_4-预加载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-预加载","aria-hidden":"true"}},[t._v("#")]),t._v(" 4 预加载")]),t._v(" "),s("ul",[s("li",[t._v("在开发中，可能会遇到这样的情况。有些资源不需要马上用到，但是希望尽早获取，这时候就可以使用预加载")]),t._v(" "),s("li",[t._v("预加载其实是声明式的 "),s("code",[t._v("fetch")]),t._v(" ，强制浏览器请求资源，并且不会阻塞 "),s("code",[t._v("onload")]),t._v(" 事件，可以使用以下代码开启预加载")])]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("preload"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://example.com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("预加载可以一定程度上降低首屏的加载时间，因为可以将一些不影响首屏但重要的文件延后加载，唯一缺点就是兼容性不好")])]),t._v(" "),s("h3",{attrs:{id:"_5-预渲染"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-预渲染","aria-hidden":"true"}},[t._v("#")]),t._v(" 5 预渲染")]),t._v(" "),s("blockquote",[s("p",[t._v("可以通过预渲染将下载的文件预先在后台渲染，可以使用以下代码开启预渲染")])]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("prerender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://poetries.com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("ul",[s("li",[t._v("预渲染虽然可以提高页面的加载速度，但是要确保该页面百分百会被用户在之后打开，否则就白白浪费资源去渲染")])]),t._v(" "),s("h3",{attrs:{id:"_6-懒执行与懒加载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-懒执行与懒加载","aria-hidden":"true"}},[t._v("#")]),t._v(" 6 懒执行与懒加载")]),t._v(" "),s("p",[s("strong",[t._v("懒执行")])]),t._v(" "),s("ul",[s("li",[t._v("懒执行就是将某些逻辑延迟到使用时再计算。该技术可以用于首屏优化，对于某些耗时逻辑并不需要在首屏就使用的，就可以使用懒执行。懒执行需要唤醒，一般可以通过定时器或者事件的调用来唤醒")])]),t._v(" "),s("p",[s("strong",[t._v("懒加载")])]),t._v(" "),s("ul",[s("li",[t._v("懒加载就是将不关键的资源延后加载")])]),t._v(" "),s("blockquote",[s("p",[t._v("懒加载的原理就是只加载自定义区域（通常是可视区域，但也可以是即将进入可视区域）内需要加载的东西。对于图片来说，先设置图片标签的 "),s("code",[t._v("src")]),t._v(" 属性为一张占位图，将真实的图片资源放入一个自定义属性中，当进入自定义区域时，就将自定义属性替换为 "),s("code",[t._v("src")]),t._v(" 属性，这样图片就会去下载资源，实现了图片懒加载")])]),t._v(" "),s("ul",[s("li",[t._v("懒加载不仅可以用于图片，也可以使用在别的资源上。比如进入可视区域才开始播放视频等")])]),t._v(" "),s("h3",{attrs:{id:"_7-文件优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-文件优化","aria-hidden":"true"}},[t._v("#")]),t._v(" 7 文件优化")])])},[],!1,null,null,null);a.default=_.exports}}]);